var pageJson = 
{"plugIns":[],"advanced":{},"basicProps":{},"pageIndex":1,"dataSource":[],"theme":"default","layouts":{"header":[{"grid":{"h":9,"i":"grid_IFDropdown_3","static":false,"moved":false,"minH":2,"w":3,"x":0,"y":0},"component":{"type":"IFDropdown","props":{"basicProps":{"componentTheme":{"fontColor":{"id":"fontColor","label":"文字颜色","value":""},"backgroundColor":{"id":"backgroundColor","label":"背景颜色","value":""},"size":{"id":"size","value":"large","label":"组件尺寸","title":"选择组件尺寸","options":[{"id":1,"label":"默认大小","value":"default"},{"id":2,"label":"大尺寸","value":"large"},{"id":3,"label":"小尺寸","value":"small"}]},"theme":{"id":"theme","value":"primary","label":"默认主题","title":"选择组件主题","options":[{"id":1,"label":"default","value":"default"},{"id":2,"label":"primary","value":"primary"},{"id":3,"label":"dashed","value":"dashed"},{"id":4,"label":"danger","value":"danger"}]},"layoutStyle":{"id":"layoutStyle","value":"vertical","label":"组件风格","title":"选择组件风格","options":[{"id":1,"label":"垂直风格","value":"vertical"},{"id":2,"label":"水平风格","value":"horizontal"}]}},"formStatus":{"visibility":{"value":true},"locked":{"value":false},"mustInput":{"value":false},"autoSum":{"value":false}},"inputDecoration":{"addonBefore":{"value":"","suffix":"","prefix":"","placeholder":"如：数量, 单价, 总金额 等","label":"前缀文字","type":"input","id":"addonBefore","addonAfter":"","addonBefore":"前缀"},"addonAfter":{"value":"","suffix":"","prefix":"","placeholder":"如：元, ￥, $ 等","label":"后缀文字","type":"input","id":"addonAfter","addonAfter":"后缀","addonBefore":""},"prefix":{"id":"prefix","type":"select","label":"前置图标","placeholder":"请选择前置图标","value":"","options":[{"id":1,"value":"user","icon":"user"},{"id":2,"value":"lock","icon":"lock"},{"id":3,"value":"cloud","icon":"cloud"},{"id":4,"value":"smile","icon":"smile"},{"id":5,"value":"link","icon":"link"},{"id":6,"value":"mail","icon":"mail"}]},"suffix":{"id":"suffix","type":"select","label":"后置图标","placeholder":"请选择后置图标","value":"","options":[{"id":1,"value":{"key":null,"ref":null,"props":{"type":"close-circle"},"_owner":null,"_store":{}},"icon":"close-circle"},{"id":2,"value":{"key":null,"ref":null,"props":{"type":"close-circle-o"},"_owner":null,"_store":{}},"icon":"close-circle-o"},{"id":3,"value":{"key":null,"ref":null,"props":{"type":"check-circle"},"_owner":null,"_store":{}},"icon":"check-circle"},{"id":4,"value":{"key":null,"ref":null,"props":{"type":"check-circle-o"},"_owner":null,"_store":{}},"icon":"check-circle-o"}]}},"inputValue":{"carry":{"id":"carry","label":"进位方式","type":"RadioGroup","value":"","options":[{"id":"round","label":"四舍五入","value":"round"},{"id":"ceil","label":"向上取整","value":"ceil"},{"id":"floor","label":"向下取整","value":"floor"}]},"label":{"id":"label","label":"标签文字","type":"Input","value":"下拉框","defaultValue":"","placeholder":"组件标签文字"},"link":{"id":"link","label":"链接地址","type":"Input","value":"#","defaultValue":"","placeholder":"组件标签地址"},"linkTarget":{"id":"linkTarget","label":"跳转方式","type":"Select","value":"_blank","options":[{"id":"_blank","value":"_blank","label":"新窗口"},{"id":"_self","value":"_self","label":"本窗口"},{"id":"_parent","value":"_parent","label":"父窗口"}]},"placeholder":{"id":"placeholder","label":"提示文字","type":"Input","value":"","defaultValue":"","placeholder":"组件提示文字"},"defaultValue":{"id":"defaultValue","label":"默认值","type":"Input","value":"","defaultValue":"","placeholder":"组件默认值"},"value":{"id":"value","label":"当前值","type":"Input","value":"","defaultValue":"","placeholder":"存在则覆盖默认值"}},"fontStyles":{"fontStyle":{"id":"fontStyle","label":"文字样式","type":"ButtonGroup","values":"","options":[{"id":"fontWeight","label":"加粗","value":"bold","checked":false},{"id":"fontStyle","label":"斜体","value":"italic","checked":false},{"id":"textDecoration","label":"下划线","value":"underline","checked":false}]},"fontSize":{"id":"fontSize","label":"字号大小","type":"Select","title":"请选择字号大小","value":"14px","options":[{"id":"ft10","label":"10px","value":"10px"},{"id":"ft12","label":"12px","value":"12px"},{"id":"ft14","label":"14px","value":"14px"},{"id":"ft16","label":"16px","value":"16px"},{"id":"ft20","label":"20px","value":"20px"},{"id":"ft24","label":"24px","value":"24px"},{"id":"ft28","label":"28px","value":"28px"},{"id":"ft32","label":"32px","value":"32px"},{"id":"ft36","label":"36px","value":"36px"},{"id":"ft40","label":"40px","value":"40px"},{"id":"ft44","label":"44px","value":"44px"},{"id":"ft48","label":"48px","value":"48px"},{"id":"ft52","label":"52px","value":"52px"},{"id":"ft56","label":"56px","value":"56px"},{"id":"ft60","label":"60px","value":"60px"},{"id":"ft64","label":"64px","value":"64px"},{"id":"ft68","label":"68px","value":"68px"}]},"fontFamily":{"id":"fontFamily","label":"字体","type":"Select","title":"请选择字体","value":"default","options":[{"id":"ff1","label":"默认字体","value":"default"},{"id":"ff1","label":"sans serif","value":"sans serif"},{"id":"ff2","label":"微软雅黑","value":"Microsoft Yahei"},{"id":"ff3","label":"黑体","value":"Heiti"}]},"textAlign":{"id":"textAlign","type":"RadioGroup","label":"文字对齐","value":"center","options":[{"id":"left","label":"左对齐","value":"left"},{"id":"center","label":"居中","value":"center"},{"id":"right","label":"右对齐","value":"right"}]},"lineHeight":{"id":"lineHeight","type":"Slider","label":"行高","value":1,"step":0.1}}},"dataSource":[],"eventList":[],"validations":[],"filterRules":[],"pushDownProfile":[],"id":"component_IFDropdown_2","name":"下拉框_component_IFDropdown_2"}}},{"grid":{"h":9,"i":"h1","static":false,"moved":false,"minH":9,"w":2,"x":0,"y":9},"component":{"type":"IFLabel","props":{"basicProps":{"componentTheme":{"fontColor":{"value":""},"backgroundColor":{"value":""},"size":{"value":"large"},"theme":{"value":"primary"},"layoutStyle":{"value":"vertical"}},"formStatus":{"visibility":{"value":true},"locked":{"value":false},"mustInput":{"value":false},"autoSum":{"value":false}},"inputDecoration":{"addonBefore":{"value":""},"addonAfter":{"value":""},"prefix":{"value":""},"suffix":{"value":""}},"inputValue":{"carry":{"value":""},"label":{"value":"abcd"},"link":{"value":"#"},"linkTarget":{"value":""},"placeholder":{"value":""},"defaultValue":{"value":""},"value":{"value":""}},"fontStyles":{"fontStyle":{"isMultiple":true,"values":""},"fontSize":{"value":"12px"},"fontFamily":{"value":"sans serif"},"textAlign":{"value":"left"},"lineHeight":{"value":1.5}}},"ctrlType":"Label","dataSource":[],"name":"标签一","eventList":[],"validations":{},"id":"Label_1","description":"","filterRules":{}}}}],"body":[],"footer":[]},"name":"form1","nextId":"IntelliForm-00002","style":{"width":960},"creater":"u-001","title":"测试表单一","eventList":[{"eventType":"onLoad","options":{"action":"BringDataSource","expression":"LOOKUP","target":["comp4"]}}],"createTS":1488133454806,"id":"IntelliForm-00001","description":"测试表单一","formType":0,"key":"IntelliForm-00001"};

/**
 * [pickTinyModel 将多余的页面信息剔除，生成最精简的页面结构json]
 * @Author   JohnNong
 * @Email    overkazaf@gmail.com
 * @Github   https://github.com/overkazaf
 * @DateTime 2017-06-01T14:52:37+0800
 * @param    {[type]}                     json [description]
 * @return   {[type]}                          [description]
 */
function pickTinyModel(json) {
	let {
		layouts: {
			header,
			body,
			footer,
		},
	} = json;

	[header, body, footer] = [header, body, footer].map((layout) => {
		return layout.map((item) => {
			let {
				grid,
				component: {
					type,
					props: {
						basicProps,
						eventList,
						dataSource,
						filterRules,
					},
				},
			} = item;

			let reduceProps = reduceBasicProps(basicProps);

			return {
				grid,
				component: {
					type,
					props: {
						basicProps: reduceProps,
						eventList,
						dataSource,
						filterRules,
					},
				},
			}
		});
	});

	let newJson = Object.assign(json, {
		layouts: {
			header,
			body,
			footer,
		},
	});

	return newJson;
}


function reduceBasicProps(basicProps) {
	let targetProps = {};
	[
		'componentTheme',
		'formStatus',
		'inputDecoration',
		'inputValue',
		'fontStyles',
	].map((key) => {
		let current = basicProps[key];
		let target = {};
		for (subKey in current) {
			let currentObj = current[subKey];
			target[subKey] = typeof currentObj.values !== 'undefined' ? {
				values: currentObj.values,
			} : {
				value: currentObj.value,
			};
		}

		targetProps[key] = target;
	});

	console.log('targetProps', targetProps);
	return targetProps;
}

// calling
let tinyModel = pickTinyModel(pageJson);

console.log('tiny model', tinyModel);